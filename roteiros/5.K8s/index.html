<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Roteiros de aula para acesso ao conteudo"><meta name=author content="Tiago Demay"><link href=https://github.com/Insper/computacao-nuvem/roteiros/5.K8s/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Computação em Nuvem - Computação em Nuvem - 2025/2</title><link rel=stylesheet href=../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#containers-e-k8s class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Computação em Nuvem - 2025/2" class="md-header__button md-logo" aria-label="Computação em Nuvem - 2025/2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Computação em Nuvem - 2025/2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Computação em Nuvem </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Insper/computacao-nuvem title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> insper.github.io/computacao-nuvem </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../1.objetivo/ class=md-tabs__link> Roteiros </a> </li> <li class=md-tabs__item> <a href=../../tutoriais/ class=md-tabs__link> Tutoriais </a> </li> <li class=md-tabs__item> <a href=../../plano_aula/ class=md-tabs__link> Plano de Aula </a> </li> <li class=md-tabs__item> <a href=../../projetos_2025-2/ class=md-tabs__link> Projeto </a> </li> <li class=md-tabs__item> <a href=../../projetos_2022/fran-janela/ class=md-tabs__link> Arquivo </a> </li> <li class=md-tabs__item> <a href=../../adicional/Videos_ref/ class=md-tabs__link> Conteudo adicional </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Computação em Nuvem - 2025/2" class="md-nav__button md-logo" aria-label="Computação em Nuvem - 2025/2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> Computação em Nuvem - 2025/2 </label> <div class=md-nav__source> <a href=https://github.com/Insper/computacao-nuvem title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> insper.github.io/computacao-nuvem </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Roteiros </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Roteiros </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> Roteiro 1 MAAS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Roteiro 1 MAAS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.objetivo/ class=md-nav__link> <span class=md-ellipsis> Objetivo </span> </a> </li> <li class=md-nav__item> <a href=../1.cabeamento/ class=md-nav__link> <span class=md-ellipsis> Cabeamento </span> </a> </li> <li class=md-nav__item> <a href=../1.infra/ class=md-nav__link> <span class=md-ellipsis> Infra </span> </a> </li> <li class=md-nav__item> <a href=../1.app/ class=md-nav__link> <span class=md-ellipsis> App </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Roteiro 2 JUJU </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Roteiro 2 JUJU </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../2.objetivo/ class=md-nav__link> <span class=md-ellipsis> Objetivo </span> </a> </li> <li class=md-nav__item> <a href=../2.infra/ class=md-nav__link> <span class=md-ellipsis> Infra </span> </a> </li> <li class=md-nav__item> <a href=../2.app/ class=md-nav__link> <span class=md-ellipsis> App </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Roteiro 3 OpenStack </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Roteiro 3 OpenStack </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../3.objetivo/ class=md-nav__link> <span class=md-ellipsis> Objetivo </span> </a> </li> <li class=md-nav__item> <a href=../3.infra/ class=md-nav__link> <span class=md-ellipsis> Infra </span> </a> </li> <li class=md-nav__item> <a href=../3.setup/ class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=../3.app/ class=md-nav__link> <span class=md-ellipsis> App </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Roteiro 4 SLA, DR e IaC </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Roteiro 4 SLA, DR e IaC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../4.objetivo/ class=md-nav__link> <span class=md-ellipsis> Objetivo </span> </a> </li> <li class=md-nav__item> <a href=../4.infra/ class=md-nav__link> <span class=md-ellipsis> Infra </span> </a> </li> <li class=md-nav__item> <a href=../4.app/ class=md-nav__link> <span class=md-ellipsis> App </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> Roteiro 5 Docker e Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Roteiro 5 Docker e Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../5.objetivo/ class=md-nav__link> <span class=md-ellipsis> Objetivo </span> </a> </li> <li class=md-nav__item> <a href=../5.infra/ class=md-nav__link> <span class=md-ellipsis> Infra </span> </a> </li> <li class=md-nav__item> <a href=../5.app/ class=md-nav__link> <span class=md-ellipsis> App </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../tutoriais/ class="md-nav__link "> <span class=md-ellipsis> Tutoriais </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Tutoriais </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../plano_aula/ class="md-nav__link "> <span class=md-ellipsis> Plano de Aula </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Plano de Aula </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../projetos_2025-2/ class="md-nav__link "> <span class=md-ellipsis> Projeto </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Projeto </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Arquivo </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Arquivo </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> <span class=md-ellipsis> Projetos 2022 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> Projetos 2022 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos_2022/fran-janela/ class=md-nav__link> <span class=md-ellipsis> Francisco Janela </span> </a> </li> <li class=md-nav__item> <a href=../../projetos_2022/DaviReisVieira/ class=md-nav__link> <span class=md-ellipsis> Davi Reis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> Projeto 2023 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Projeto 2023 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos_2023/2023-2_projeto/ class=md-nav__link> <span class=md-ellipsis> Rubrica </span> </a> </li> <li class=md-nav__item> <a href=../../projetos_2023/README_rodrigo/ class=md-nav__link> <span class=md-ellipsis> Rodrigo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> Projeto 2024 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Projeto 2024 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos_2024-1/2024-1_projeto/ class=md-nav__link> <span class=md-ellipsis> Rubrica </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> Projeto 2024-2 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> Projeto 2024-2 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos_2024-2/2024-2_projeto/ class=md-nav__link> <span class=md-ellipsis> Rubrica </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class=md-ellipsis> Projeto 2025-1 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Projeto 2025-1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos_2025-1/projeto/ class=md-nav__link> <span class=md-ellipsis> Rubrica </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6 id=__nav_6_6_label tabindex=0> <span class=md-ellipsis> Ligthsail </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Ligthsail </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adicional/AWSLightsail/ class=md-nav__link> <span class=md-ellipsis> Introdução </span> </a> </li> <li class=md-nav__item> <a href=../../adicional/topicos/AWSLigthsailInstancia/ class=md-nav__link> <span class=md-ellipsis> Instancia </span> </a> </li> <li class=md-nav__item> <a href=../../adicional/topicos/AWSLigthsailAdmin/ class=md-nav__link> <span class=md-ellipsis> Administração </span> </a> </li> <li class=md-nav__item> <a href=../../adicional/topicos/AWSLigthsailContainer/ class=md-nav__link> <span class=md-ellipsis> Container </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Conteudo adicional </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Conteudo adicional </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> Governanca Internet </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Governanca Internet </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adicional/Videos_ref/ class=md-nav__link> <span class=md-ellipsis> Videos </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado-este-roteiro-e-prototipado-por-voce class=md-nav__link> <span class=md-ellipsis> Voce chegou a um roteiro avancado, este Roteiro envolve a resolução de problemas de implantação, esperamos que você esteja preparado, este roteiro é prototipado por você!!!! </span> </a> </li> <li class=md-nav__item> <a href=#target class=md-nav__link> <span class=md-ellipsis> TARGET </span> </a> <nav class=md-nav aria-label=TARGET> <ul class=md-nav__list> <li class=md-nav__item> <a href=#do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro class=md-nav__link> <span class=md-ellipsis> DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tipo-de-implantacoes class=md-nav__link> <span class=md-ellipsis> Tipo de implantacoes </span> </a> <nav class=md-nav aria-label="Tipo de implantacoes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tradicional class=md-nav__link> <span class=md-ellipsis> Tradicional </span> </a> </li> <li class=md-nav__item> <a href=#virtualizada class=md-nav__link> <span class=md-ellipsis> Virtualizada </span> </a> </li> <li class=md-nav__item> <a href=#conteinerizada class=md-nav__link> <span class=md-ellipsis> Conteinerizada </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instalando-e-configurando-o-octavia-loadbalancer-para-openstack class=md-nav__link> <span class=md-ellipsis> Instalando e Configurando o Octavia (Loadbalancer para Openstack) </span> </a> </li> <li class=md-nav__item> <a href=#webserver class=md-nav__link> <span class=md-ellipsis> WebServer </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=containers-e-k8s>Containers e K8s<a class=headerlink href=#containers-e-k8s title="Permanent link">&para;</a></h1> <p>Objetivos</p> <ol> <li>Entender os conceitos básicos sobre Contêineres e seus Orquestradores.</li> <li>Instalar o Octavia no Openstack</li> <li>Integrar o Openstack e o Kubernetes</li> </ol> <p>Pré-requisitos:</p> <ol> <li>Terminar o capítulo anterior (SLA,DR e IaC)</li> <li>Realizar a leitura sobre o <a href=https://docs.docker.com/engine/docker-overview/ >Docker</a>.</li> <li>Realizar a leitura sobre o <a href=https://kubernetes.io/docs/concepts/ >Kubernetes</a>.</li> <li>Realizar a leitura do <strong>Octavia</strong>. <a href=https://docs.openstack.org/octavia/latest/ >documentação</a> e <a href=https://docs.openstack.org/charm-guide/latest/admin/networking/load-balancing.html>implantação</a></li> <li>Realizar a leitura do <a href=https://docs.openstack.org/barbican/latest/ >Barbican</a>.</li> <li>Realizar a leitura dos Charms. <a href=https://jaas.ai/vault>Vault</a>, <a href=https://jaas.ai/octavia>Octavia</a>, <a href=https://jaas.ai/barbican>Barbican</a>.</li> </ol> <details class=info> <summary>Info</summary> <p><strong>DIVISÃO DO ROTEIRO</strong> O Roteiro é dividido em 3 partes principais.</p> <ul> <li>Entendendo tipos de implantacoes - Visão Geral</li> <li>Adicionando Octavia (Load Balancer) na Nuvem privada(Openstack)</li> <li>Utilizando Docker e Kubernetes</li> </ul> </details> <h2 id=voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado-este-roteiro-e-prototipado-por-voce>Voce chegou a um roteiro avancado, este Roteiro envolve a resolução de problemas de implantação, esperamos que você esteja preparado, este roteiro é prototipado por você!!!!<a class=headerlink href=#voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado-este-roteiro-e-prototipado-por-voce title="Permanent link">&para;</a></h2> <h2 id=target>TARGET<a class=headerlink href=#target title="Permanent link">&para;</a></h2> <h3 id=do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro>DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO<a class=headerlink href=#do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro title="Permanent link">&para;</a></h3> <p><img alt=Imagem-Topologia src=../../assets/images/nuvem.png width=600></p> <h2 id=tipo-de-implantacoes>Tipo de implantacoes<a class=headerlink href=#tipo-de-implantacoes title="Permanent link">&para;</a></h2> <h3 id=tradicional>Tradicional<a class=headerlink href=#tradicional title="Permanent link">&para;</a></h3> <p>Inicialmente, as organizações executavam aplicativos em servidores físicos. Os limites de recursos não podem ser definidos para aplicativos em servidores físicos, o que causa problemas de alocação de recursos. Por exemplo, se vários aplicativos estiverem sendo executados em um servidor físico, pode haver uma situação em que um aplicativo consuma mais recursos, resultando em um desempenho insatisfatório de outros aplicativos. A solução para isso é executar cada aplicativo em um servidor físico diferente. Mas isso não aumentou porque os recursos são subutilizados e é caro para as organizações manter muitos servidores físicos.</p> <h3 id=virtualizada>Virtualizada<a class=headerlink href=#virtualizada title="Permanent link">&para;</a></h3> <p>Como solução, a virtualização foi introduzida. Ele permite que você execute várias máquinas virtuais (VMs) na CPU de um único servidor físico. A virtualização permite que os aplicativos sejam isolados entre VMs e fornece um nível de segurança que as informações de um aplicativo não podem ser acessadas livremente por outro aplicativo. A virtualização permite uma melhor utilização dos recursos em servidores físicos e uma melhor escalabilidade, pois os aplicativos podem ser facilmente adicionados ou atualizados, os custos de hardware são reduzidos e muito mais. Com a virtualização, você pode apresentar um conjunto de recursos físicos como um cluster de máquinas virtuais descartáveis. Cada VM é uma máquina completa, executando todos os componentes, incluindo seu próprio sistema operacional, sobre hardware virtualizado.</p> <h3 id=conteinerizada>Conteinerizada<a class=headerlink href=#conteinerizada title="Permanent link">&para;</a></h3> <p>Os contêineres são pacotes leves do código do seu aplicativo, juntamente com dependências, como versões específicas de tempos de execução de linguagem de programação e bibliotecas necessárias para executar seus serviços de software. Os contêineres facilitam o compartilhamento de recursos de CPU, memória, armazenamento e rede no nível dos sistemas operacionais e oferecem um mecanismo de empacotamento lógico no qual os aplicativos podem ser abstraídos do ambiente em que realmente são executados.</p> <p><strong>Os contêineres virtualizam no nível do sistema operacional enquanto as VMs virtualizam no nível do hardware</strong></p> <p><img alt=Imagem-Topologia src=../../assets/images/container.png width=600></p> <h2 id=instalando-e-configurando-o-octavia-loadbalancer-para-openstack>Instalando e Configurando o Octavia (Loadbalancer para Openstack)<a class=headerlink href=#instalando-e-configurando-o-octavia-loadbalancer-para-openstack title="Permanent link">&para;</a></h2> <ul> <li>No servidor Main - análise o juju status seu LoadBalancer deve ser implantado nesta infraestrutura sem causar degradação dos serviços já existentes: Faça a instalação do <strong>Octavia</strong> de acordo com a leitura prévia obrigatória !!!</li> </ul> <details class=dicas> <summary>Dicas</summary> <p><strong>Dicas sobre Troubleshooting</strong></p> <p>Durante o processo de implantação de OpenStack, Octavia e Kubernetes, é comum que surjam problemas técnicos inesperados. Aqui estão algumas dicas para solucionar possíveis dificuldades:</p> <ol> <li>Problemas de Conexão no Juju</li> <li><strong>Sintomas</strong>: Erros ao tentar conectar ao controlador ou realizar deploys.</li> <li> <p><strong>Solução</strong>: Verifique se as máquinas de infraestrutura estão acessíveis. Use o comando <code>juju status</code> para inspecionar o estado dos serviços. Reiniciar o agente do Juju com <code>juju reload</code> pode resolver problemas de conectividade.</p> </li> <li> <p>Erros ao Configurar o Octavia</p> </li> <li><strong>Sintomas</strong>: Octavia não aparece como um recurso de load balancing no OpenStack ou falhas ao configurar relações.</li> <li> <p><strong>Solução</strong>: Confirme que todos os pré-requisitos de rede estão configurados corretamente e que o charm Octavia está relacionado ao Neutron e ao Keystone. Use <code>juju debug-log --include octavia/0</code> para inspecionar logs específicos do Octavia.</p> </li> <li> <p>Falhas de Certificados no Octavia</p> </li> <li><strong>Sintomas</strong>: Octavia não aceita as configurações de certificados ou falha ao gerar instâncias de load balancers.</li> <li> <p><strong>Solução</strong>: Revise os certificados gerados, conferindo se estão nos formatos e permissões corretos. Certifique-se de que os certificados CA e os tokens do Vault estão válidos. Verifique a validade dos certificados com <code>openssl x509 -noout -in [certificado] -dates</code>.</p> </li> <li> <p>Erros ao Criar o Cluster Kubernetes</p> </li> <li><strong>Sintomas</strong>: Kubernetes não inicia corretamente, ou não conecta ao Juju.</li> <li><strong>Solução</strong>: Verifique se o Juju está configurado para o OpenStack como Cloud Provider. Use <code>juju status</code> para identificar onde o processo falhou, e verifique logs do Kubernetes com <code>kubectl logs</code>.</li> </ol> </details> <details class=info> <summary>Info</summary> <p>Certificados SSL (Secure Sockets Layer) são essenciais para garantir a segurança na comunicação entre servidores e clientes na web, especialmente em contextos onde os dados trafegados devem ser protegidos contra interceptações ou alterações. No caso de um load balancer como o Octavia, os certificados SSL desempenham um papel fundamental na proteção das interações entre o controlador do load balancer e as instâncias (conhecidas como amphorae) que distribuem o tráfego.</p> <p>O uso de SSL cria um "túnel" seguro, criptografando os dados transmitidos para que apenas os dispositivos autorizados consigam descriptografar e entender o conteúdo das mensagens. Isso impede que terceiros interceptem e acessem informações sensíveis ou modifiquem os dados em trânsito.</p> <p>Para o Octavia, que precisa gerenciar e monitorar as instâncias de load balancers, o SSL assegura que qualquer instrução enviada ao load balancer seja legítima e provenha do controlador autorizado. Assim, SSL ajuda a garantir que o tráfego balanceado entre as máquinas do OpenStack seja confiável e imune a ataques de "man-in-the-middle" (interceptação), oferecendo um nível robusto de segurança e autenticidade para toda a arquitetura da nuvem.</p> </details> <p>Ainda no Servidor <em>main</em>, vamos aumentar alguns limites:</p> <p><code>openstack quota set --cores 100 [ID do Projeto]</code></p> <p><code>openstack quota set --instances 100 [ID do Projeto]</code></p> <p>No capítulo 3, foi realizada a implantação do Openstack no hardware disponível. Além de VMs, o Openstack consegue também manipular containers, tal qual o MaaS e o Juju. Contudo o grande problema é que não basta apenas criar e destruir um container, é preciso administrar uma complexa arquitetura, monitorando e controlando um conjunto de containers que representam uma implantação de um sistema.</p> <h2 id=webserver>WebServer<a class=headerlink href=#webserver title="Permanent link">&para;</a></h2> <ul> <li>Criar uma instância m1.small com IP público no Openstack, nomea-la como <strong>juju-openstack-web-server</strong></li> <li>Adicionar um Security Group novo a esta instancia (não utilizar o default)</li> <li>Acessar a instancia criada</li> <li>Vamos criar um WebServer em NodeJS</li> <li>Criar o arquivo ~/hello-node/server.js</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>#!/usr/bin/env nodejs
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>var http = require(&#39;http&#39;);
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>var os = require(&#39;os&#39;);
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>var handleRequest = function(request, response) {
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    console.log(&#39;Received request for URL: &#39; + request.url);
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    response.writeHead(200);
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    response.end(&#39;{ &quot;host&quot;: &#39; + os.hostname() + &#39;, &quot;message&quot;: &quot;Hello World!&quot;}&#39;);
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>};
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>var www = http.createServer(handleRequest);
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>www.listen(8080);
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>console.log(&#39;Server running at http://localhost:8080/&#39;);
</code></pre></div> <ul> <li>Testar o WebServer rodando localmente no terminal.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>sudo apt install nodejs
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>node server.js
</code></pre></div> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-1 WebServer</p> <ol> <li>De um print das Telas abaixo:</li> <li>Da aba network <em>topology</em> no <strong>OpenStack</strong>.</li> <li>Das regras do Security Group utilizado.</li> <li>Da Aba do navegador com o WebServer Rodando.</li> </ol> </div> <h1 id=instalar-o-docker-na-instancia>Instalar o Docker na instancia<a class=headerlink href=#instalar-o-docker-na-instancia title="Permanent link">&para;</a></h1> <p>Arquitetura Docker <img alt=❗ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2757.svg title=:exclamation:></p> <p><img alt=Imagem-Topologia src=../../assets/images/docker.png width=600></p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>sudo apt-get update
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>sudo apt install build-essential apt-transport-https curl
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>curl -fsSL https://get.docker.com | sh -
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>sudo usermod -aG docker $USER
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>newgrp docker
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>docker version
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>docker run hello-world
</code></pre></div> <ul> <li>Criar uma um arquivo ~/hello-node/Dockerfile que dará origem ao container</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>FROM node:6.9.2
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>EXPOSE 8080
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>COPY server.js .
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>CMD node server.js
</code></pre></div> <ul> <li>Montar a imagem local (Cria um container com esta aplicacao webserver)</li> </ul> <p><code>docker build -t hello-node:v1 ./hello-node/</code></p> <ul> <li>Rodar o container com a imagem criada.</li> </ul> <p><code>docker container run hello-node:v1</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-2 Docker</p> <ol> <li>De um print das Telas abaixo:</li> <li>WebServer Rodando no navegador.</li> <li>Saída do comando (docker images ls)</li> <li>Saída do comando (docker container ls)</li> </ol> </div> <h2 id=docker-hub>Docker Hub<a class=headerlink href=#docker-hub title="Permanent link">&para;</a></h2> <ul> <li>Caso não tenha ainda, criar individualmente um login (usuário) na <a href=https://hub.docker.com/ >https://hub.docker.com/</a></li> </ul> <p>• Fazer o login no Docker • Aplicar a tag na imagem e dar o push do Docker Hub • Para mais detalhes <code>docker --help</code></p> <h3 id=kubernetes-aka-k8s-iremos-implatantar-um-conjunto-de-ferramentas-e-softwares-que-juntos-forma-o-kubernertes>Kubernetes aka k8s - iremos implatantar um conjunto de ferramentas e softwares que juntos forma o Kubernertes.<a class=headerlink href=#kubernetes-aka-k8s-iremos-implatantar-um-conjunto-de-ferramentas-e-softwares-que-juntos-forma-o-kubernertes title="Permanent link">&para;</a></h3> <p><img alt=Imagem-Topologia src=../../assets/images/kubernetes.png width=600></p> <ul> <li>Para facilitar o deploy do Kubernetes vamos utilizar uma <strong>"velha conhecida"</strong>. </li> </ul> <h3 id=deja-vu-juju-reborn>Deja-vu (Juju Reborn)<a class=headerlink href=#deja-vu-juju-reborn title="Permanent link">&para;</a></h3> <p>O Dashboard do Openstack possui alguns termos (region, instance type, security group, etc) que são semelhantes ao da AWS. Como visto anteriormente, Juju consegue operar sobre Public Cloud, Private Cloud, Bare-metal e Container. Para o setup ficar completo, agora vamos utilizar o Juju sobre o <strong>Openstack</strong>.</p> <details class=dicas> <summary>Dicas</summary> <p><a href=https://juju.is/docs/olm/openstack>Documentacao - adicionar Openstack como cloud</a> Using auth-type “userpass”. \n Enter username: admin \n Enter password: &lt; ADMIN PASSWORD &gt; \n Enter tenant-name (optional): kube-test \n Enter tenant-id (optional): &lt; PROJECT ID &gt; \n Enter version (optional): 3 \n Enter domain-name (optional): DEIXAR-VAZIO \n Enter project-domain-name (optional): admin_domain \n Enter user-domain-name (optional): admin_domain \n <a href=https://ubuntu.com/kubernetes/docs/openstack-integration>Documentacao - adicionar integrador obrigatório</a><br> <a href=https://github.com/Insper/computacao-nuvem/blob/main/docs/bundle.yaml>Bundle modificado do Kubernetes-core</a> </p> </details> <ul> <li>Acesse a instância m1.small criada no início do roteiro.</li> <li>Fazer a instalação do Juju.</li> <li>Adicione o Openstack como Cloud Provider no Juju.</li> <li>Fazer o deploy do <strong>Kubernetes-core</strong></li> </ul> <details class=info> <summary>Info</summary> </details> <ul> <li> <p>Instalar kubectl no cliente via snap. <code>sudo snap install kubectl --classic</code></p> </li> <li> <p>Verificar a configuração do Kubernetes via kubectl <code>kubectl cluster-info</code></p> </li> <li> <p>Caso tenha problemas ver: <a href=https://ubuntu.com/kubernetes/docs/operations>documentacao-kubernetes</a></p> </li> <li>Configurar o kubectl proxy para utilização externa na porta 8080.</li> <li>Acessar o Dashboard.</li> </ul> <h2 id=fazendo-um-deploy>Fazendo um Deploy<a class=headerlink href=#fazendo-um-deploy title="Permanent link">&para;</a></h2> <ul> <li>Fazer o deploy da imagem docker criada na sessão anterior</li> </ul> <p><code>kubectl run hello-node --image=[user]/hello-node:v1 --port=8080</code></p> <ul> <li>Verificar no terminal: <code>kubectl get all</code></li> <li>Verificar o deploy status no Dashboard</li> <li>Expandir o deploy para 5 réplicas do pod</li> </ul> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-3 Dashboard Kubernetes</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do dashboard Kubernetes com as 5 replicas</li> </ol> </div> <h2 id=acessando-o-deploy-entregando-a-aplicacao-para-seu-cliente>Acessando o Deploy - entregando a aplicação para seu cliente<a class=headerlink href=#acessando-o-deploy-entregando-a-aplicacao-para-seu-cliente title="Permanent link">&para;</a></h2> <p>Criar um serviço que irá expor o deploy</p> <h3 id=alternativa-i-clusterip-com-ingress>Alternativa I - ClusterIP com Ingress<a class=headerlink href=#alternativa-i-clusterip-com-ingress title="Permanent link">&para;</a></h3> <p><code>kubectl expose deployment hello-node --type=ClusterIP</code></p> <ul> <li>Criar o arquivo ingress.yaml</li> </ul> <p><div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>apiVersion: extensions/v1beta1
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>kind: Ingress
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>metadata:
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>  name: hello-node-ingress
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>spec:
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>  rules:
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>  - host: hello-node.[ip do kubernetes-worker].xip.io
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    http:
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>      paths:
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>      - path: /
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        backend:
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>          serviceName: hello-node
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>          servicePort: 8080
</code></pre></div> * Aplicar arquivo ingress ao K8s</p> <p><code>kubectl create -f ingress.yaml</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-4 Expose Service</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> </ol> </div> <h3 id=alternativa-ii-nodeport>Alternativa II - NodePort<a class=headerlink href=#alternativa-ii-nodeport title="Permanent link">&para;</a></h3> <p><code>kubectl expose deployment hello-node --type=NodePort</code></p> <ul> <li>Verificar qual porta foi designada e liberar o security group do worker</li> </ul> <p><code>juju run --unit kubernetes-worker/[# worker] "open-port [porta]"</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-4 Acessar o deploy</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> <li>WebServer Rodando no navegador utilizando a porta aberta.</li> </ol> </div> <h2 id=alterando-o-deploy>Alterando o deploy<a class=headerlink href=#alterando-o-deploy title="Permanent link">&para;</a></h2> <ul> <li>Alterar o arquivo server.js</li> <li>Montar uma nova imagem com tag v2 e faça um push</li> <li>Fazer um deploy de um pod de testes</li> <li>Testar as alterações</li> <li>Fazer a implantação imediata em produção:</li> </ul> <p><code>kubectl set image deployment/hello-node hello-node=[user]/hello-node:v2</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-5 Modificacao</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> <li>WebServer modificado Rodando no navegador utilizando a porta aberta.</li> </ol> </div> <h1 id=dinamica-final-utilizando-o-load-balancer-octavia-para-o-servico-em-kubernetes>Dinâmica Final: Utilizando o Load Balancer Octavia para o Serviço em Kubernetes<a class=headerlink href=#dinamica-final-utilizando-o-load-balancer-octavia-para-o-servico-em-kubernetes title="Permanent link">&para;</a></h1> <h2 id=objetivo>Objetivo<a class=headerlink href=#objetivo title="Permanent link">&para;</a></h2> <p>Distribuir o tráfego de entrada entre as réplicas do serviço <strong>hello-node</strong> em Kubernetes, utilizando o load balancer Octavia para assegurar que o tráfego seja balanceado e que o serviço esteja disponível mesmo que alguma réplica falhe.</p> <h2 id=pre-requisitos>Pré-requisitos<a class=headerlink href=#pre-requisitos title="Permanent link">&para;</a></h2> <ul> <li>Cluster Kubernetes em execução, com o serviço <code>hello-node</code> rodando com 5 réplicas.</li> <li>Configuração e validação do Octavia como load balancer no OpenStack, com certificados SSL ativos.</li> <li>Acesso à instância com Kubernetes para rodar os comandos.</li> </ul> <h2 id=passos>Passos<a class=headerlink href=#passos title="Permanent link">&para;</a></h2> <ol> <li><strong>Configuração do Serviço para o Load Balancer</strong></li> <li> <p>Altere o tipo de exposição do serviço <code>hello-node</code> no Kubernetes para <strong>LoadBalancer</strong>. Esse tipo permite que o Kubernetes provisione automaticamente um balanceador de carga com Octavia, redirecionando o tráfego para as réplicas do serviço.</p> </li> <li> <p>No arquivo de configuração do serviço, modifique a seção <code>type</code> para: <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-node</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-node</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hello-node</span>
</code></pre></div></p> </li> <li> <p><strong>Aplicação do Serviço</strong></p> </li> <li> <p>Aplique a configuração atualizada com o comando: <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>hello-node-service.yaml
</code></pre></div></p> </li> <li> <p><strong>Validação do Load Balancer</strong></p> </li> <li>Verifique se o load balancer foi criado e se está direcionando o tráfego para as réplicas do serviço. Isso pode ser feito com o comando: <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>hello-node
</code></pre></div></li> <li> <p>Este comando mostrará o endereço IP externo atribuído pelo load balancer ao serviço <code>hello-node</code>. Anote esse IP, pois ele será utilizado para acessar o serviço.</p> </li> <li> <p><strong>Teste do Balanceamento de Carga</strong></p> </li> <li>No navegador ou com <code>curl</code>, acesse o IP externo do load balancer para validar o balanceamento: <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>curl<span class=w> </span>http://<span class=o>[</span>external-ip<span class=o>]</span>:8080
</code></pre></div></li> <li>Execute esse comando várias vezes ou atualize o navegador para observar como o load balancer distribui as requisições entre as réplicas. Você deve notar que as respostas vêm de diferentes réplicas do <code>hello-node</code>, indicando que o balanceamento está funcionando.</li> </ol> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-6 Docker</p> <ul> <li> <p><strong>Objetivo</strong>: Garantir que o serviço esteja acessível via load balancer e que o tráfego seja distribuído uniformemente entre as réplicas. <strong>Tarefas</strong>:</p> </li> <li> <p>Dê um print da aba do navegador mostrando o serviço rodando pelo IP externo do load balancer.</p> </li> <li> <p>Verifique o balanceamento de carga acessando o IP externo múltiplas vezes e observe as respostas dos diferentes hosts.</p> </li> <li> <p>Confirme que o serviço é resiliente: force a remoção de uma réplica (<code>kubectl delete pod [pod-name]</code>) e observe o load balancer direcionar o tráfego às réplicas restantes, tire prints desta etapa.</p> </li> </ul> </div> <hr> <h2 id=reflexao>Reflexão<a class=headerlink href=#reflexao title="Permanent link">&para;</a></h2> <p>Essa dinâmica mostra como o load balancer Octavia integra-se ao Kubernetes para distribuir o tráfego automaticamente, suportando o serviço <code>hello-node</code> e garantindo alta disponibilidade. Após concluir essa etapa, você terá implantado um serviço com balanceamento de carga, aplicando as boas práticas de exposição e resiliência de sistemas distribuídos.</p> <h2 id=conclusao-somente-para-pensar><strong>Conclusão:</strong> <em>SOMENTE PARA PENSAR</em> <img alt=❗ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2757.svg title=:exclamation:> <img alt=❗ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2757.svg title=:exclamation:> <img alt=❗ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2757.svg title=:exclamation:><a class=headerlink href=#conclusao-somente-para-pensar title="Permanent link">&para;</a></h2> <p>Você desempenhou uma implantação em tempo real usando Kubernetes e DockerHub. Como seria uma arquitetura de Continuous Integration/Continuous Delivery (CI/CD) real utilizando Kubernetes?</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - Tiago Demay </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/Insper/computacao-nuvem target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.linkedin.com/in/tiago-demay target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.0.0/js-yaml.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://cdn.jsdelivr.net/gh/insper-education/active-handout-plugins-js@main/package/plugin-bundle.js></script> </body> </html>